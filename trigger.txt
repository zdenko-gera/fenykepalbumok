CREATE TABLE UPLOAD_LOG (
    LOG_ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    IMAGE_ID NUMBER,
    UPLOADED_BY NUMBER,
    UPLOAD_TIME DATE,
    CONSTRAINT upload_log_pk PRIMARY KEY (LOG_ID),
    CONSTRAINT upload_log_fk_image FOREIGN KEY (IMAGE_ID) REFERENCES IMAGES (IMAGE_ID),
    CONSTRAINT upload_log_fk_user FOREIGN KEY (UPLOADED_BY) REFERENCES USERS (USER_ID)
);


CREATE OR REPLACE TRIGGER Image_Upload_Log
AFTER INSERT ON IMAGES
FOR EACH ROW
BEGIN
    INSERT INTO UPLOAD_LOG (IMAGE_ID, UPLOADED_BY, UPLOAD_TIME)
    VALUES (:NEW.IMAGE_ID, :NEW.USER_ID, SYSDATE);
END;